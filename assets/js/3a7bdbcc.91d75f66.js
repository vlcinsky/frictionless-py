(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{161:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),d=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},p=function(e){var t=d(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=d(a),u=n,m=p["".concat(o,".").concat(u)]||p[u]||b[u]||i;return a?r.a.createElement(m,c(c({ref:t},l),{},{components:a})):r.a.createElement(m,c({ref:t},l))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,o[1]=c;for(var l=2;l<i;l++)o[l]=a[l];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},99:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return s})),a.d(t,"toc",(function(){return l})),a.d(t,"default",(function(){return p}));var n=a(3),r=a(8),i=(a(0),a(161)),o=["components"],c={title:"Describing Data",goodread:{prepare:["cp data/table.csv table.csv","cp data/country-1.csv country-1.csv","cp data/country-2.csv country-2.csv","cp data/country-3.csv country-3.csv","cp data/capital-3.csv capital-3.csv"],cleanup:["rm table.csv","rm country-1.csv","rm country-2.csv","rm country-3.csv","rm capital-3.csv","rm country.schema.yaml","rm country.resource.yaml","rm country.package.yaml"]}},s={unversionedId:"guides/describing-data",id:"guides/describing-data",isDocsHomePage:!1,title:"Describing Data",description:"This guide assumes basic familiarity with the Frictionless Framework. To learn more, please read the Introduction and Quick Start. Also, this guide is meant to be read in order from top to bottom, and reuses examples throughout the text. You can use the menu to skip sections, but please note that you might need to run code from earlier sections to make all the examples work.",source:"@site/../docs/guides/describing-data.md",slug:"/guides/describing-data",permalink:"/docs/guides/describing-data",editUrl:"https://github.com/frictionlessdata/frictionless-py/edit/main/docs/../docs/guides/describing-data.md",version:"current",lastUpdatedBy:"roll",lastUpdatedAt:1623751383,formattedLastUpdatedAt:"6/15/2021",sidebar:"guides",previous:{title:"Basic Examples",permalink:"/docs/guides/basic-examples"},next:{title:"Extracting Data",permalink:"/docs/guides/extracting-data"}},l=[{value:"Describe Functions",id:"describe-functions",children:[]},{value:"Describing a Schema",id:"describing-a-schema",children:[]},{value:"Describing a Resource",id:"describing-a-resource",children:[]},{value:"Describing a Package",id:"describing-a-package",children:[]},{value:"Metadata Importance",id:"metadata-importance",children:[]},{value:"Inferring Metadata",id:"inferring-metadata",children:[]},{value:"Expanding Metadata",id:"expanding-metadata",children:[]},{value:"Transforming Metadata",id:"transforming-metadata",children:[]},{value:"Validating Metadata",id:"validating-metadata",children:[]}],d={toc:l};function p(e){var t=e.components,a=Object(r.a)(e,o);return Object(i.b)("wrapper",Object(n.a)({},d,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"This guide assumes basic familiarity with the Frictionless Framework. To learn more, please read the ",Object(i.b)("a",{parentName:"p",href:"https://framework.frictionlessdata.io/docs/guides/introduction"},"Introduction")," and ",Object(i.b)("a",{parentName:"p",href:"https://framework.frictionlessdata.io/docs/guides/quick-start"},"Quick Start"),". Also, this guide is meant to be read in order from top to bottom, and reuses examples throughout the text. You can use the menu to skip sections, but please note that you might need to run code from earlier sections to make all the examples work.")),Object(i.b)("p",null,'In Frictionless terms, "Describing data" means creating metadata for your data files. Having metadata is important because data files by themselves usually do not provide enough information to fully understand the data. For example, if you have a data table in a CSV format without metadata, you are missing a few critical pieces of information:'),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"the meaning of the fields e.g., what the ",Object(i.b)("inlineCode",{parentName:"li"},"size")," field means (does that field mean geographic size? Or does it refer to the size of the file?)"),Object(i.b)("li",{parentName:"ul"},"data type information e.g., is this field a string or an integer?"),Object(i.b)("li",{parentName:"ul"},"data constraints e.g., the minimum temperature for your measurements"),Object(i.b)("li",{parentName:"ul"},"data relations e.g., identifier connections"),Object(i.b)("li",{parentName:"ul"},"and others")),Object(i.b)("p",null,'For a dataset, there is even more information that can be provided, like the general purpose of a dataset, information about data sources, list of authors, and more. Also, when there are many tabular files, relational rules can be very important. Usually, there are foreign keys ensuring the integrity of the dataset; for example, think of a reference table containing country names and other data tables using it as a reference. Data in this form is called "normalized data" and it occurs very often in scientific and other kinds of research.'),Object(i.b)("p",null,'Now that we have a general understanding of what "describing data" is, we can discuss why it is important:'),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"data validation"),": metadata helps to reveal problems in your data during early stages of your workflow"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"data publication"),": metadata provides additional information that your data doesn't include")),Object(i.b)("p",null,"These are not the only positives of having metadata, but they are two of the most important. Please continue reading to learn how Frictionless helps to achieve these advantages by describing your data. This guide will discuss the main ",Object(i.b)("inlineCode",{parentName:"p"},"describe")," functions (",Object(i.b)("inlineCode",{parentName:"p"},"describe"),", ",Object(i.b)("inlineCode",{parentName:"p"},"describe_schema"),", ",Object(i.b)("inlineCode",{parentName:"p"},"describe_resource"),", ",Object(i.b)("inlineCode",{parentName:"p"},"describe_package"),") and will then go into more detail about how to create and edit metadata in Frictionless."),Object(i.b)("p",null,"For the following examples, you will need to have Frictionless installed. See our ",Object(i.b)("a",{parentName:"p",href:"https://framework.frictionlessdata.io/docs/guides/quick-start"},"Quick Start Guide")," if you need help."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'title="CLI"',title:'"CLI"'},"pip install frictionless\n")),Object(i.b)("h2",{id:"describe-functions"},"Describe Functions"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"describe")," functions are the main Frictionless tool for describing data. In many cases, this high-level interface is enough for data exploration and other needs."),Object(i.b)("p",null,"The frictionless framework provides 4 different ",Object(i.b)("inlineCode",{parentName:"p"},"describe")," functions in Python:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"describe"),": detects the source type and returns Data Resource or Data Package metadata"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"describe_schema"),": always returns Table Schema metadata"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"describe_resource"),": always returns Data Resource metadata"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"describe_package"),": always returns Data Package metadata")),Object(i.b)("p",null,"As described in more detail in the ",Object(i.b)("a",{parentName:"p",href:"https://framework.frictionlessdata.io/docs/guides/introduction"},"Introduction"),", a resource is a single file, such as a data file, and a package is a set of files, such as a data file and a schema."),Object(i.b)("p",null,"In the command-line, there is only 1 command (",Object(i.b)("inlineCode",{parentName:"p"},"describe"),") but there is also a flag to adjust the behavior:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'title="CLI"',title:'"CLI"'},"frictionless describe your-table.csv\nfrictionless describe your-table.csv --type schema\nfrictionless describe your-table.csv --type resource\nfrictionless describe your-table.csv --type package\n")),Object(i.b)("p",null,"Please take into account that file names might be used by Frictionless to detect a metadata type for furhter data extraction or validation. It's recommended to use corresponding suffixes when you save your metadata to the disc, for example, you might name your Table Schema as ",Object(i.b)("inlineCode",{parentName:"p"},"table.schema.yaml"),", Data Resource - ",Object(i.b)("inlineCode",{parentName:"p"},"table.resource.yaml"),", and Data Package - ",Object(i.b)("inlineCode",{parentName:"p"},"table.package.yaml"),". If there is no hint in the file name Frictionless will assume that it's a resource descriptor by default."),Object(i.b)("p",null,"For example, if we want a Data Package descriptor for a single file:"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Download ",Object(i.b)("a",{parentName:"p",href:"https://raw.githubusercontent.com/frictionlessdata/frictionless-py/master/data/table.csv"},Object(i.b)("inlineCode",{parentName:"a"},"table.csv")),' to reproduce the examples (right-click and "Save link as").')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"frictionless describe table.csv --type package\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"# --------\n# metadata: table.csv\n# --------\n\nprofile: data-package\nresources:\n  - encoding: utf-8\n    format: csv\n    hashing: md5\n    name: table\n    path: table.csv\n    profile: tabular-data-resource\n    schema:\n      fields:\n        - name: id\n          type: integer\n        - name: name\n          type: string\n    scheme: file\n")),Object(i.b)("h2",{id:"describing-a-schema"},"Describing a Schema"),Object(i.b)("p",null,'Table Schema is a specification for providing a "schema" (similar to a database schema) for tabular data. This information includes the expected data type for each value in a column ("string", "number", "date", etc.), constraints on the value ("this string can only be at most 10 characters long"), and the expected format of the data ("this field should only contain strings that look like email addresses"). Table Schema can also specify relations between data tables.'),Object(i.b)("p",null,"We're going to use this file for the examples in this section. For this guide, we only use CSV files because of their demonstrativeness, but in-general Frictionless can handle data in Excel, JSON, SQL, and many other formats:"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Download ",Object(i.b)("a",{parentName:"p",href:"https://raw.githubusercontent.com/frictionlessdata/frictionless-py/master/data/country-1.csv"},Object(i.b)("inlineCode",{parentName:"a"},"country-1.csv")),' to reproduce the examples (right-click and "Save link as").')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat country-1.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-csv",metastring:'title="country-1.csv"',title:'"country-1.csv"'},"id,neighbor_id,name,population\n1,,Britain,67\n2,3,France,67\n3,2,Germany,83\n4,5,Italy,60\n5,4,Spain,47\n")),Object(i.b)("p",null,"Let's get a Table Schema using the Frictionless framework (note: this example uses YAML for the schema format, but Frictionless also supports JSON format):"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from frictionless import describe_schema\n\nschema = describe_schema("country-1.csv")\nschema.to_yaml("country.schema.yaml") # use schema.to_json for JSON\n')),Object(i.b)("p",null,"The high-level functions of Frictionless operate on the dataset and resource levels so we have to use a little bit of Python programming to get the schema information. Below we will show how to use a command-line interface for similar tasks."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat country.schema.yaml\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"fields:\n  - name: id\n    type: integer\n  - name: neighbor_id\n    type: integer\n  - name: name\n    type: string\n  - name: population\n    type: integer\n")),Object(i.b)("p",null,"As we can see, we were able to infer basic metadata from our data file. But describing data doesn't end here - we can provide additional information that we discussed earlier:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from frictionless import describe_schema\n\nschema = describe_schema("country-1.csv")\nschema.get_field("id").title = "Identifier"\nschema.get_field("neighbor_id").title = "Identifier of the neighbor"\nschema.get_field("name").title = "Name of the country"\nschema.get_field("population").title = "Population"\nschema.get_field("population").description = "According to the year 2020\'s data"\nschema.get_field("population").constraints["minimum"] = 0\nschema.foreign_keys.append(\n    {"fields": ["neighbor_id"], "reference": {"resource": "", "fields": ["id"]}}\n)\nschema.to_yaml("country.schema.yaml")\n')),Object(i.b)("p",null,"Let's break it down:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"we added a title for all the fields"),Object(i.b)("li",{parentName:"ul"},'we added a description to the "Population" field; the year information can be critical to interpret the data'),Object(i.b)("li",{parentName:"ul"},'we set a constraint to the "Population" field because it can\'t be less than 0'),Object(i.b)("li",{parentName:"ul"},'we added a foreign key saying that "Identifier of the neighbor" should be present in the "Identifier" field')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat country.schema.yaml\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"fields:\n  - name: id\n    title: Identifier\n    type: integer\n  - name: neighbor_id\n    title: Identifier of the neighbor\n    type: integer\n  - name: name\n    title: Name of the country\n    type: string\n  - constraints:\n      minimum: 0\n    description: According to the year 2020's data\n    name: population\n    title: Population\n    type: integer\nforeignKeys:\n  - fields:\n      - neighbor_id\n    reference:\n      fields:\n        - id\n      resource: ''\n")),Object(i.b)("p",null,"Later we're going to show how to use the schema we created to ensure the validity of your data; in the next few sections, we will focus on Data Resource and Data Package metadata."),Object(i.b)("p",null,"To continue learning about table schemas please read:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://specs.frictionlessdata.io/table-schema/"},"Table Schema Spec")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"/docs/references/api-reference#schema"},"API Reference: Schema"))),Object(i.b)("h2",{id:"describing-a-resource"},"Describing a Resource"),Object(i.b)("p",null,"The Data Resource format describes a data resource such as an individual file or data table.\nThe essence of a Data Resource is a path to the data file it describes.\nA range of other properties can be declared to provide a richer set of metadata including Table Schema for tabular data."),Object(i.b)("p",null,'For this section, we will use a file that is slightly more complex to handle. In this example, cells are separated by the ";" character and there is a comment on the top:'),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Download ",Object(i.b)("a",{parentName:"p",href:"https://raw.githubusercontent.com/frictionlessdata/frictionless-py/master/data/country-2.csv"},Object(i.b)("inlineCode",{parentName:"a"},"country-2.csv")),' to reproduce the examples (right-click and "Save link as").')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'title="CLI"',title:'"CLI"'},"cat country-2.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-csv",metastring:'title="country-2.csv"',title:'"country-2.csv"'},"# Author: the scientist\nid;neighbor_id;name;population\n1;;Britain;67\n2;3;France;67\n3;2;Germany;83\n4;5;Italy;60\n5;4;Spain;47\n")),Object(i.b)("p",null,"Let's describe it this time using the command-line interface:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"frictionless describe country-2.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"# --------\n# metadata: country-2.csv\n# --------\n\nencoding: utf-8\nformat: csv\nhashing: md5\nname: country-2\npath: country-2.csv\nprofile: tabular-data-resource\nschema:\n  fields:\n    - name: '# Author: the scientist'\n      type: string\nscheme: file\n")),Object(i.b)("p",null,'OK, that looks wrong -- for example, the schema has only inferred one field, and that field does not seem correct either. As we have seen in the "Introductory Guide" Frictionless is capable of inferring some complicated cases\' metadata but our data table is too complex for it to automatically infer. We need to manually program it:'),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from frictionless import Schema, describe\n\nresource = describe("country-2.csv")\nresource.dialect.delimiter = ";"\nresource.layout.header_rows = [2]\nresource.schema = Schema("country.schema.yaml")\nresource.to_yaml("country.resource.yaml")\n')),Object(i.b)("p",null,"So what we did here:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"we set the header rows to be row number 2; as humans, we can easily see that was the proper row"),Object(i.b)("li",{parentName:"ul"},'we set the CSV Delimiter to be ";"'),Object(i.b)("li",{parentName:"ul"},"we reuse the schema we created ",Object(i.b)("a",{parentName:"li",href:"#describing-schema"},"earlier")," as the data has the same structure and meaning")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat country.resource.yaml\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"dialect:\n  delimiter: ;\nencoding: utf-8\nformat: csv\nhashing: md5\nlayout:\n  headerRows:\n    - 2\nname: country-2\npath: country-2.csv\nprofile: tabular-data-resource\nschema:\n  fields:\n    - name: id\n      title: Identifier\n      type: integer\n    - name: neighbor_id\n      title: Identifier of the neighbor\n      type: integer\n    - name: name\n      title: Name of the country\n      type: string\n    - constraints:\n        minimum: 0\n      description: According to the year 2020's data\n      name: population\n      title: Population\n      type: integer\n  foreignKeys:\n    - fields:\n        - neighbor_id\n      reference:\n        fields:\n          - id\n        resource: ''\nscheme: file\n")),Object(i.b)("p",null,"Our resource metadata includes the schema metadata we created earlier, but it also has:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"general information about the file's schema, format, and compression"),Object(i.b)("li",{parentName:"ul"},"information about CSV Dialect which helps software understand how to read it"),Object(i.b)("li",{parentName:"ul"},"checksum information like hash, bytes, and rows")),Object(i.b)("p",null,"But the most important difference is that the resource metadata contains the ",Object(i.b)("inlineCode",{parentName:"p"},"path")," property. This is a conceptual distinction of the Data Resource specification compared to the Table Schema specification. While a Table Schema descriptor can describe a class of data files, a Data Resource descriptor describes only one exact data file, ",Object(i.b)("inlineCode",{parentName:"p"},"data/country-2.csv")," in our case."),Object(i.b)("p",null,"Using programming terminology we could say that:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Table Schema descriptor is abstract (for a class of files)"),Object(i.b)("li",{parentName:"ul"},"Data Resource descriptor is concrete (for an individual file)")),Object(i.b)("p",null,'We will show the practical difference in the "Using Metadata" section, but in the next section, we will overview the Data Package specification.'),Object(i.b)("p",null,"To continue learning about data resources please read:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://specs.frictionlessdata.io/data-resource/"},"Data Resource Spec")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"/docs/references/api-reference#resource"},"API Reference: Resource"))),Object(i.b)("h2",{id:"describing-a-package"},"Describing a Package"),Object(i.b)("p",null,"A Data Package consists of:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Metadata that describes the structure and contents of the package"),Object(i.b)("li",{parentName:"ul"},'Resources such as data files that form the contents of the package\nThe Data Package metadata is stored in a "descriptor". This descriptor is what makes a collection of data a Data Package. The structure of this descriptor is the main content of the specification below.')),Object(i.b)("p",null,"In addition to this descriptor, a data package will include other resources such as data files. The Data Package specification does NOT impose any requirements on their form or structure and can, therefore, be used for packaging any kind of data."),Object(i.b)("p",null,"The data included in the package may be provided as:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Files bundled locally with the package descriptor"),Object(i.b)("li",{parentName:"ul"},"Remote resources, referenced by URL (see the ",Object(i.b)("a",{parentName:"li",href:"https://framework.frictionlessdata.io/docs/tutorials/schemes/local-tutorial"},"schemes tutorial")," for more information about supported URLs)"),Object(i.b)("li",{parentName:"ul"},'"Inline" data (see below) which is included directly in the descriptor')),Object(i.b)("p",null,"For this section, we will use the following files:"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Download ",Object(i.b)("a",{parentName:"p",href:"https://raw.githubusercontent.com/frictionlessdata/frictionless-py/master/data/country-3.csv"},Object(i.b)("inlineCode",{parentName:"a"},"country-3.csv")),' to reproduce the examples (right-click and "Save link as")')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat country-3.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-csv",metastring:'title="country-3.csv"',title:'"country-3.csv"'},"id,capital_id,name,population\n1,1,Britain,67\n2,3,France,67\n3,2,Germany,83\n4,5,Italy,60\n5,4,Spain,47\n")),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Download ",Object(i.b)("a",{parentName:"p",href:"https://raw.githubusercontent.com/frictionlessdata/frictionless-py/master/data/capital-3.csv"},Object(i.b)("inlineCode",{parentName:"a"},"capital-3.csv")),' to reproduce the examples (right-click and "Save link as").')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat capital-3.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-csv",metastring:'title="capital-3.csv"',title:'"capital-3.csv"'},"id,name\n1,London\n2,Berlin\n3,Paris\n4,Madrid\n5,Rome\n")),Object(i.b)("p",null,"First of all, let's describe our package using the command-line interface. We did it before for a resource but now we're going to use a glob pattern to indicate that there are multiple files:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"frictionless describe *-3.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"# --------\n# metadata: capital-3.csv country-3.csv\n# --------\n\nprofile: data-package\nresources:\n  - encoding: utf-8\n    format: csv\n    hashing: md5\n    name: capital-3\n    path: capital-3.csv\n    profile: tabular-data-resource\n    schema:\n      fields:\n        - name: id\n          type: integer\n        - name: name\n          type: string\n    scheme: file\n  - encoding: utf-8\n    format: csv\n    hashing: md5\n    name: country-3\n    path: country-3.csv\n    profile: tabular-data-resource\n    schema:\n      fields:\n        - name: id\n          type: integer\n        - name: capital_id\n          type: integer\n        - name: name\n          type: string\n        - name: population\n          type: integer\n    scheme: file\n")),Object(i.b)("p",null,"We have already learned about many concepts that are reflected in this metadata. We can see resources, schemas, fields, and other familiar entities. The difference is that this descriptor has information about multiple files which is a popular way of sharing data - in datasets. Very often you have not only one data file but also additional data files, some textual documents e.g. PDF, and others. To package all of these files with the corresponding metadata we use data packages."),Object(i.b)("p",null,"Following the pattern that is already familiar to the guide reader, we add some additional metadata:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from frictionless import describe\n\npackage = describe("*-3.csv")\npackage.title = "Countries and their capitals"\npackage.description = "The data was collected as a research project"\npackage.get_resource("country-3").name = "country"\npackage.get_resource("capital-3").name = "capital"\npackage.get_resource("country").schema.foreign_keys.append(\n    {"fields": ["capital_id"], "reference": {"resource": "capital", "fields": ["id"]}}\n)\npackage.to_yaml("country.package.yaml")\n')),Object(i.b)("p",null,"In this case, we add a relation between different files connecting ",Object(i.b)("inlineCode",{parentName:"p"},"id")," and ",Object(i.b)("inlineCode",{parentName:"p"},"capital_id"),". Also, we provide dataset-level metadata to explain the purpose of this dataset. We haven't added individual fields' titles and descriptions, but that can be done as it was shown in the \"Table Schema\" section."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat country.package.yaml\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"description: The data was collected as a research project\nprofile: data-package\nresources:\n  - encoding: utf-8\n    format: csv\n    hashing: md5\n    name: capital\n    path: capital-3.csv\n    profile: tabular-data-resource\n    schema:\n      fields:\n        - name: id\n          type: integer\n        - name: name\n          type: string\n    scheme: file\n  - encoding: utf-8\n    format: csv\n    hashing: md5\n    name: country\n    path: country-3.csv\n    profile: tabular-data-resource\n    schema:\n      fields:\n        - name: id\n          type: integer\n        - name: capital_id\n          type: integer\n        - name: name\n          type: string\n        - name: population\n          type: integer\n      foreignKeys:\n        - fields:\n            - capital_id\n          reference:\n            fields:\n              - id\n            resource: capital\n    scheme: file\ntitle: Countries and their capitals\n")),Object(i.b)("p",null,"The main role of the Data Package descriptor is describing a dataset; as we can see, it includes previously shown descriptors like ",Object(i.b)("inlineCode",{parentName:"p"},"schema"),", ",Object(i.b)("inlineCode",{parentName:"p"},"dialect"),", and ",Object(i.b)("inlineCode",{parentName:"p"},"resource"),". But it would be a mistake to think that Data Package is the least important specification; actually, it completes the Frictionless Data suite making it possible to share and validate not only individual files but also complete datasets."),Object(i.b)("p",null,"To continue learning about data resources please read:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://specs.frictionlessdata.io/data-package/"},"Data Package Spec")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"/docs/references/api-reference#package"},"API Reference: Package"))),Object(i.b)("h2",{id:"metadata-importance"},"Metadata Importance"),Object(i.b)("p",null,"This documentation contains a great deal of information on how to use metadata and why it's vital for your data. In this section, we're going to provide a quick example based on the \"Data Resource\" section but please read other documents to get the full picture."),Object(i.b)("p",null,"Let's get back to this complex data table:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat country-2.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-csv",metastring:'title="country-2.csv"',title:'"country-2.csv"'},"# Author: the scientist\nid;neighbor_id;name;population\n1;;Britain;67\n2;3;France;67\n3;2;Germany;83\n4;5;Italy;60\n5;4;Spain;47\n")),Object(i.b)("p",null,"As we tried before, by default Frictionless can't properly describe this file so we got something like:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"frictionless describe country-2.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"# --------\n# metadata: country-2.csv\n# --------\n\nencoding: utf-8\nformat: csv\nhashing: md5\nname: country-2\npath: country-2.csv\nprofile: tabular-data-resource\nschema:\n  fields:\n    - name: '# Author: the scientist'\n      type: string\nscheme: file\n")),Object(i.b)("p",null,"Trying to extract the data will fail this way:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"frictionless extract country-2.csv\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"# ----\n# data: country-2.csv\n# ----\n\n==============================\n# Author: the scientist\n==============================\nid;neighbor_id;name;population\n1;;Britain;67\n2;3;France;67\n3;2;Germany;83\n4;5;Italy;60\n5;4;Spain;47\n==============================\n")),Object(i.b)("p",null,"This example highlights a really important idea - without metadata many software will not be able to even read this data file. Furthermore, without metadata people cannot understand the purpose of this data. To see how we can use metadata to fix our data, let's now use the ",Object(i.b)("inlineCode",{parentName:"p"},"country.resource.yaml"),' file we created in the "Data Resource" section with Frictionless ',Object(i.b)("inlineCode",{parentName:"p"},"extract"),":"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"frictionless extract country.resource.yaml\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"# ----\n# data: country.resource.yaml\n# ----\n\n==  ===========  =======  ==========\nid  neighbor_id  name     population\n==  ===========  =======  ==========\n 1               Britain          67\n 2            3  France           67\n 3            2  Germany          83\n 4            5  Italy            60\n 5            4  Spain            47\n==  ===========  =======  ==========\n")),Object(i.b)("p",null,"As we can see, the data is now fixed. The metadata we had saved the day! If we explore this data in Python we can discover that it also corrected data types - e.g. ",Object(i.b)("inlineCode",{parentName:"p"},"id")," is Python's integer not string. We can now export and share this data without any worries."),Object(i.b)("h2",{id:"inferring-metadata"},"Inferring Metadata"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Many Frictionless Framework's classes are metadata classes as though Schema, Resource, or Package. All the sections below are applicable for all these classes. You can read about the base Metadata class in more detail in ",Object(i.b)("a",{parentName:"p",href:"/docs/references/api-reference#metadata"},"API Reference"),".")),Object(i.b)("p",null,"Many Frictionless functions infer metadata under the hood such as ",Object(i.b)("inlineCode",{parentName:"p"},"describe"),", ",Object(i.b)("inlineCode",{parentName:"p"},"extract"),", and many more. On a lower-level, it's possible to control this process. To see this, let's create a ",Object(i.b)("inlineCode",{parentName:"p"},"Resource"),"."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from pprint import pprint\nfrom frictionless import Resource\n\nresource = Resource("country-1.csv")\npprint(resource)\n')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"{'path': 'country-1.csv'}\n")),Object(i.b)("p",null,"Frictionless always tries to be as explicit as possible. We didn't provide any metadata except for ",Object(i.b)("inlineCode",{parentName:"p"},"path")," so we got the expected result. But now, we'd like to ",Object(i.b)("inlineCode",{parentName:"p"},"infer")," additional metadata:"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Note that we use the ",Object(i.b)("inlineCode",{parentName:"p"},"stats")," argument for the ",Object(i.b)("inlineCode",{parentName:"p"},"resource.infer")," function. We can ask for stats using CLI with ",Object(i.b)("inlineCode",{parentName:"p"},"frictionless describe data/table.csv --stats"),".")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'title="Python"',title:'"Python"'},'from pprint import pprint\nfrom frictionless import Resource\n\nresource = Resource("country-1.csv")\nresource.infer(stats=True)\npprint(resource)\n')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"{'encoding': 'utf-8',\n 'scheme': 'file',\n 'format': 'csv',\n 'hashing': 'md5',\n 'name': 'country-1',\n 'path': 'data/country-1.csv',\n 'profile': 'tabular-data-resource',\n 'schema': {'fields': [{'name': 'id', 'type': 'integer'},\n                       {'name': 'neighbor_id', 'type': 'integer'},\n                       {'name': 'name', 'type': 'string'},\n                       {'name': 'population', 'type': 'integer'}]},\n 'stats': {'bytes': 100,\n           'fields': 4,\n           'hash': '4204f087f328b70c854c03403ab448c4',\n           'rows': 5}}\n")),Object(i.b)("p",null,"The result is really familiar to us already. We have seen it a lot as an output of the ",Object(i.b)("inlineCode",{parentName:"p"},"describe")," function or command. Basically, that's what this high-level function does under the hood: create a resource and then infer additional metadata."),Object(i.b)("p",null,"All the main ",Object(i.b)("inlineCode",{parentName:"p"},"Metadata")," classes have this method with different available options but with the same conceptual purpose:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"package.infer")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"resource.infer")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"schema.infer"))),Object(i.b)("p",null,"For more advanced detection options, please read the ",Object(i.b)("a",{parentName:"p",href:"/docs/guides/framework/detector-guide"},"Detector Guide")),Object(i.b)("h2",{id:"expanding-metadata"},"Expanding Metadata"),Object(i.b)("p",null,"By default, Frictionless never adds default values to metadata, for example:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from pprint import pprint\nfrom frictionless import describe\n\nresource = describe("data/country-1.csv")\npprint(resource.schema)\n')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"{'fields': [{'name': 'id', 'type': 'integer'},\n            {'name': 'neighbor_id', 'type': 'integer'},\n            {'name': 'name', 'type': 'string'},\n            {'name': 'population', 'type': 'integer'}]}\n")),Object(i.b)("p",null,"Under the hood it, for example, still treats empty strings as missing values because it's the specs' default. We can reveal implicit metadata by expanding it:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from pprint import pprint\nfrom frictionless import describe\n\nresource = describe("data/country-1.csv")\nresource.schema.expand()\npprint(resource.schema)\n')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"{'fields': [{'bareNumber': True,\n             'format': 'default',\n             'name': 'id',\n             'type': 'integer'},\n            {'bareNumber': True,\n             'format': 'default',\n             'name': 'neighbor_id',\n             'type': 'integer'},\n            {'format': 'default', 'name': 'name', 'type': 'string'},\n            {'bareNumber': True,\n             'format': 'default',\n             'name': 'population',\n             'type': 'integer'}],\n 'missingValues': ['']}\n")),Object(i.b)("h2",{id:"transforming-metadata"},"Transforming Metadata"),Object(i.b)("p",null,"We have seen this before but let's re-iterate; it's possible to transform core metadata properties using Python's interface:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from frictionless import Resource\n\nresource = Resource("country.resource.yaml")\nresource.title = "Countries"\nresource.description = "It\'s a research project"\nresource.dialect.delimiter = ";"\nresource.layout.header_rows = [2]\nresource.to_yaml("country.resource.yaml")\n')),Object(i.b)("p",null,"But the Python interface is not our only option. Thanks to the flexibility of the Frictionless Specs, we can add arbitrary metadata to our descriptor. We use dictionary operations to do this:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from frictionless import Resource\n\nresource = Resource("country.resource.yaml")\nresource["customKey1"] = "Value1"\nresource["customKey2"] = "Value2"\nresource.to_yaml("country.resource.yaml")\n')),Object(i.b)("p",null,"Let's check it out:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash",metastring:'goodread title="CLI"',goodread:!0,title:'"CLI"'},"cat country.resource.yaml\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"customKey1: Value1\ncustomKey2: Value2\ndescription: It's a research project\ndialect:\n  delimiter: ;\nencoding: utf-8\nformat: csv\nhashing: md5\nlayout:\n  headerRows:\n    - 2\nname: country-2\npath: country-2.csv\nprofile: tabular-data-resource\nschema:\n  fields:\n    - name: id\n      title: Identifier\n      type: integer\n    - name: neighbor_id\n      title: Identifier of the neighbor\n      type: integer\n    - name: name\n      title: Name of the country\n      type: string\n    - constraints:\n        minimum: 0\n      description: According to the year 2020's data\n      name: population\n      title: Population\n      type: integer\n  foreignKeys:\n    - fields:\n        - neighbor_id\n      reference:\n        fields:\n          - id\n        resource: ''\nscheme: file\ntitle: Countries\n")),Object(i.b)("h2",{id:"validating-metadata"},"Validating Metadata"),Object(i.b)("p",null,"Metadata validity is an important topic, and we recommend validating your metadata before publishing. For example, let's first make it invalid:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from frictionless import Resource\n\nresource = Resource("country.resource.yaml")\nresource["title"] = 1\nprint(resource.metadata_valid)\nprint(resource.metadata_errors)\n')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"False\n[{'code': 'resource-error', 'name': 'Resource Error', 'tags': [], 'note': '\"1 is not of type \\'string\\'\" at \"title\" in metadata and at \"properties/title/type\" in profile', 'message': 'The data resource has an error: \"1 is not of type \\'string\\'\" at \"title\" in metadata and at \"properties/title/type\" in profile', 'description': 'A validation cannot be processed.'}]\n")),Object(i.b)("p",null,"We see this error: ",Object(i.b)("inlineCode",{parentName:"p"},"'message': 'The data resource has an error: \"1 is not of type \\'string\\'\" at \"title\" in metadata and at \"properties/title/type\" in profile'")," Now, let's fix our resource metadata:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python",metastring:'goodread title="Python"',goodread:!0,title:'"Python"'},'from frictionless import Resource\n\nresource = Resource("country.resource.yaml")\nresource["title"] = \'Countries\'\nprint(resource.metadata_valid)\n')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"True\n")),Object(i.b)("p",null,"You need to check ",Object(i.b)("inlineCode",{parentName:"p"},"metadata.metadata_valid")," only if you change it manually; Frictionless' high-level functions like ",Object(i.b)("inlineCode",{parentName:"p"},"validate")," do that on their own."))}p.isMDXComponent=!0}}]);